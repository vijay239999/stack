"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dot = void 0;
const node_process_1 = require("process");
const reporter_js_1 = require("../../builders/reporter.js");
const format_js_1 = require("../format.js");
const write_js_1 = require("../write.js");
const poku_js_1 = require("./poku.js");
exports.dot = (() => {
    return (0, reporter_js_1.createReporter)({
        onRunStart() {
            (0, write_js_1.hr)();
        },
        onDescribeAsTitle() { },
        onTodoModifier() { },
        onSkipModifier() { },
        onSkipFile() { },
        onFileResult({ path, status, output }) {
            node_process_1.stdout.write(status ? String((0, format_js_1.format)('.')) : String((0, format_js_1.format)('F').bold().code('31')));
            if (!status)
                poku_js_1.errors.push({
                    file: path.relative,
                    output,
                });
        },
        onRunResult(options) {
            node_process_1.stdout.write('\n');
            poku_js_1.poku.onRunResult(options);
        },
    });
})();
